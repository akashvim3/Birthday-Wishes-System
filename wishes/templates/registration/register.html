{% extends 'base.html' %}
{% load wish_tags %}

{% block title %}Register - Birthday Wishes System{% endblock %}

{% block extra_css %}
<style>
    body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        min-height: 100vh;
        margin: 0;
        padding: 0;
    }
</style>
{% endblock %}

{% block content %}
<div class="registration-container fade-in flex items-center justify-center py-8 px-4">
    <div class="max-w-md w-full">
        <div class="registration-card rounded-2xl p-8">
            <div class="registration-header text-center mb-8">
                <div class="mb-6">
                    <i class="fas fa-user-plus text-6xl text-purple-600 mb-4 animate-bounce"></i>
                </div>
                <h2 class="text-3xl font-bold gradient-text-animated">
                    Create Account
                </h2>
                <p class="text-gray-600 mt-3 text-lg">Join our birthday wishes community</p>
            </div>

            <form method="post" class="space-y-6" id="registrationForm">
                {% csrf_token %}

                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-user mr-2 form-icon"></i> Username
                    </label>
                    {{ form.username|add_class:"form-input" }}
                    {% if form.username.errors %}
                        <div class="error-message">
                            <i class="fas fa-exclamation-circle mr-2"></i>
                            {{ form.username.errors.0 }}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-envelope mr-2 form-icon"></i> Email (Optional)
                    </label>
                    <input type="email" name="email"
                           class="form-input"
                           placeholder="Enter your email">
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-lock mr-2 form-icon"></i> Password
                    </label>
                    {{ form.password1|add_class:"form-input" }}
                    {% if form.password1.errors %}
                        <div class="error-message">
                            <i class="fas fa-exclamation-circle mr-2"></i>
                            {{ form.password1.errors.0 }}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-lock mr-2 form-icon"></i> Confirm Password
                    </label>
                    {{ form.password2|add_class:"form-input" }}
                    {% if form.password2.errors %}
                        <div class="error-message">
                            <i class="fas fa-exclamation-circle mr-2"></i>
                            {{ form.password2.errors.0 }}
                        </div>
                    {% endif %}
                </div>

                <div class="password-requirements">
                    <p class="font-semibold mb-3 flex items-center">
                        <i class="fas fa-shield-alt mr-2 text-blue-500"></i>
                        Password requirements:
                    </p>
                    <ul class="space-y-2">
                        <li class="flex items-center">
                            <i class="fas fa-check-circle text-green-500 mr-2"></i>
                            <span>At least 8 characters long</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check-circle text-green-500 mr-2"></i>
                            <span>Must not be entirely numeric</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check-circle text-green-500 mr-2"></i>
                            <span>Must not be too common</span>
                        </li>
                    </ul>
                </div>

                <button type="submit"
                        class="submit-button w-full flex items-center justify-center">
                    <i class="fas fa-rocket mr-2"></i>
                    <span>Create Account</span>
                </button>

                <div class="text-center pt-4">
                    <p class="text-gray-600">
                        Already have an account?
                        <a href="{% url 'login' %}" class="already-account-link">
                            Sign in here
                        </a>
                    </p>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('registrationForm');
    const inputs = form.querySelectorAll('.form-input');
    const submitButton = form.querySelector('.submit-button');
    
    // Add focus effects
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.classList.add('focused');
        });
        
        input.addEventListener('blur', function() {
            this.parentElement.classList.remove('focused');
        });
    });
    
    // Form submission animation
    form.addEventListener('submit', function() {
        submitButton.classList.add('loading');
        submitButton.disabled = true;
        
        // Re-enable after 3 seconds (in case of validation errors)
        setTimeout(() => {
            submitButton.classList.remove('loading');
            submitButton.disabled = false;
        }, 3000);
    });
    
    // Add success animation when form is valid
    if (form.querySelector('.error-message')) {
        form.classList.add('form-error');
    } else {
        form.classList.add('form-success');
    }
});
</script>
{% endblock %}
